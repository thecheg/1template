"use strict";var winHeight,scrollOffset=60,popupOpened=!1,popupOpenedPos=0,scrollPos=0,animDuration=200,pageLoaded=!1,formTitle="",scrollFixedEl=$("body");function vhFix(){$("body").append('<div class="vh-fix" style="position:fixed;width:1px;left:-9999px;top:0;bottom:0;pointer-events:none;opacity:0;visibility:hidden;" />');var o=.01*$(".vh-fix").height();document.documentElement.style.setProperty("--vh",o+"px"),$(".vh-fix").remove()}function tabsInit(o){var e;!0!==o.data("init")&&((o.find(".ui-tab.active").length<1||1<o.find(".ui-tab.active").length)&&(o.find(".ui-tab").removeClass("active"),o.find(".ui-tab:first-child").addClass("active")),e=o.find(".ui-tab.active").find(".ui-tab-link").attr("data-tab"),$('.ui-tab-content[data-tab="'+e+'"]').show(),o.find(".ui-tab-link").on("click",function(){var o,e=$(this);e.closest(".ui-tab").hasClass("active")||(o=e.attr("data-tab"),e.closest(".ui-tabs").find(".ui-tab").removeClass("active"),e.closest(".ui-tab").addClass("active"),$('.ui-tab-content[data-tab="'+o+'"]').closest(".ui-tab-container").find(".ui-tab-content").removeClass("active"),$('.ui-tab-content[data-tab="'+o+'"]').addClass("active"))}),o.data("init",!0))}function accordionInit(s){var l=s.find(".ui-accordion-item"),o=s.find(".ui-accordion-trigger"),d=s.find(".ui-accordion-panel"),c=!1,e=!0,p=!1;function i(o,e){var i,t,n,a,r=c?animDuration:0;"open"==e?(c&&(d.hide(),i=o.offset().top-scrollOffset-30,s.find(".ui-accordion-item.active").find(".ui-accordion-panel").show(),setTimeout(function(){$("html, body").animate({scrollTop:i},animDuration)},30)),setTimeout(function(){l.removeClass("active"),o.addClass("active"),d.slideUp(r),o.find(".ui-accordion-panel").slideDown(r)},30),p&&(t=s.attr("data-acc"),n=o.attr("data-acc-item"),(a=$('[data-acc-con="'+t+'"]')).find("[data-acc-con-item]").removeClass("active"),a.find('[data-acc-con-item="'+n+'"]').addClass("active"))):(o.removeClass("active"),d.slideUp(r)),c=c||!0}s.hasClass("not-collapsable")&&(e=!1),s.attr("data-acc")&&(p=!0),s.hasClass("collapsed")||i(!s.find(".ui-accordion-item.active").length||1<s.find(".ui-accordion-item.active").length?l.first():s.find(".ui-accordion-item.active"),"open"),o.on("click",function(){var o=$(this).closest(".ui-accordion-item");o.hasClass("active")?e&&i(o,"close"):i(o,"open")}),s.data("init",!0)}function formInit(n){n.find(".ui-form-field--required").each(function(){$(this).append('<div class="ui-form-errors"><p class="ui-form-errors__item ui-form-errors__item--required">Обязательное поле</p></div>')}),n.find(".ui-form-field--required").each(function(){$(this).find(".ui-input-placeholder").append(" *")}),n.on("submit",function(o){o.preventDefault();var e,i,t=n.attr("data-form-type");formValidator(n.get(0))?(e=new FormData(n.get(0)),i=n.attr("data-thxpopup")||"thx",formTitle&&""!=formTitle||(formTitle="Заявка"),e.append("formTitle",formTitle),e.append("formType",t),$.ajax({type:"POST",url:rootPath+"php/send.php",dataType:"json",processData:!1,contentType:!1,data:e,success:function(){thx(i)},error:function(o){console.log(o)}})):n.find(".ui-form-field--error").first().find("input, textarea").focus()}),n.data("init",!0)}function popupsInit(o){o.find(".popup-content").prepend('<div class="cross-btn popup-close noselect" />'),o.data("init",!0)}function inputInit(o){var e=o.find("input, textarea"),i=o.closest(".ui-form-field");e.on("focus",function(){o.addClass("active focused")}).on("focusout blur change keyup input",function(){""===$(this).val()?e.is(":focus")||o.removeClass("active"):(o.addClass("active"),i.removeClass("ui-form-field--error"))}).on("focusout",function(){o.removeClass("focused")}),e.trigger("change"),o.data("init",!0)}function imgInit(){$("img[data-src]").each(function(){var o=$(this);o.attr("src",o.attr("data-src")),o.on("load",function(){o.removeAttr("data-src")})})}function init(){imgInit(),$(".ui-tabs").each(function(){!0!==$(this).data("init")&&tabsInit($(this))}),$(".ui-ccordion").each(function(){!0!==$(this).data("init")&&accordionInit($(this))}),$(".send-form").each(function(){!0!==$(this).data("init")&&formInit($(this))}),$(".popup").each(function(){!0!==$(this).data("init")&&popupsInit($(this))}),$(".ui-input").each(function(){!0!==$(this).data("init")&&inputInit($(this))})}svg4everybody(),$(document).ready(function(){"ontouchstart"in document.documentElement?$("html").addClass("touch"):$("html").addClass("no-touch");var o=$("[data-scroll-section]");winHeight=$(window).height(),scrollPos=$(window).scrollTop(),init(),$(document).on("click",".menu-toggle",function(){(menuOpened?menuClose:menuOpen)()}),device.desktop(),$(window).on("resize",function(){winHeight=$(window).height(),scrollPos=$(window).scrollTop(),scrollbarWidth(),defineBarWidth(),e(),vhFix(),menuOpened&&menuClose()}),$(window).on("scroll",function(){scrollPos=$(window).scrollTop(),e()}),$(window).trigger("resize").trigger("scroll"),$(document).on("input change paste keyup",'input.phone-number, .send-form .ui-form-field[data-field-type="phone"] input',function(){$(this).val(this.value.replace(/[^0-9\+ ()\-]/,""))}),$(document).on("click",".scrollTo",function(o){o.preventDefault();var e,i=$(this).attr("data-scrollto-link");i&&(e=$('[data-scrollto-target="'+i+'"]').not($(this)).offset().top-scrollOffset,$("html, body").animate({scrollTop:e},500))}),$(document).on("click",".popup-close",function(){popupClose()}),$(document).on("click",".popup",function(o){$(o.target).closest(".popup-content").length||(popupClose(),o.stopPropagation())}),$(document).on("keypress",function(o){1==popupOpened&&27==o.which&&popupClose()});var t=!1;function r(o){return $('[data-scroll-section="'+o+'"]').first().offset().top-scrollOffset}function e(){var a=parseInt(.3*winHeight);t||o.each(function(){var o=$(this),e=o.attr("data-scroll-section"),i=$('[data-scroll-link="'+e+'"].nav-scroll'),t=o.outerHeight(),n=r(e);n-a<scrollPos&&scrollPos<n+t-a?i.parent("li").addClass("active"):i.parent("li").removeClass("active")})}$(".nav-scroll[data-scroll-link]").on("click",function(o){var e,i=$(this).attr("data-scroll-link");$('[data-scroll-section="'+i+'"]').length&&(menuOpened=!1,scrollLock(scrollFixedEl,"unlock"),$(".nav-scroll[data-scroll-link]").closest("li").removeClass("active"),$('.nav-scroll[data-scroll-link="'+i+'"]').closest("li").addClass("active"),t=!0,e=r(i),$("html, body").animate({scrollTop:e},700,function(){t=!1})),o.preventDefault()})}),$(window).on("load",function(){setTimeout(function(){$(".preloader").fadeOut(1e3,function(){$(this).remove()}),$("body").addClass("body--page-loaded"),pageLoaded=!0,$(window).trigger("scroll")},300)});var scrollBarWidth=0;function scrollbarWidth(){var o=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');$("body").append(o);var e=$("div",o).innerWidth();o.css("overflow-y","scroll");var i=$("div",o).innerWidth();return $(o).remove(),e-i}function defineBarWidth(){var o=parseInt($(".page").height());scrollBarWidth=winHeight<o?scrollbarWidth():0}function scrollLock(o,e){"unlock"==e?($("body").removeClass("body--fixed"),o.css({"padding-right":""})):($("body").addClass("body--fixed"),o.css({"padding-right":scrollBarWidth}))}var menuOpened=!1;function menuOpen(){popupOpenedPos=$(window).scrollTop(),$("body").addClass("body--menu-opened"),scrollLock(scrollFixedEl),menuOpened=!0}function menuClose(){$("body").removeClass("body--menu-opened"),scrollLock(scrollFixedEl,"unlock"),device.ios()&&$(window).scrollTop(popupOpenedPos),menuOpened=!1}function popup(o,e,i,t,n){var a;$("#"+o).length&&(popupOpenedPos=$(window).scrollTop(),$(".popups-overlay").addClass("active"),$("body").addClass("body--popup-opened"),scrollLock(scrollFixedEl),$(".popup").removeClass("active"),a=$(".popup#"+o),"request"==o&&(i?a.find(".popup-title__head").html(i):a.find(".popup-title__head").html("Оставить заявку"),t?a.find(".popup-title__subtitle").html(t):a.find(".popup-title__subtitle").html("Оставьте заявку, и&nbsp;наш специалист свяжется с&nbsp;вами в&nbsp;ближайшее время"),n?a.find(".ui-btn--sendform").html(n):a.find(".ui-btn--sendform").html("Оставить заявку"),e&&(formTitle=e)),a.scrollTop(0).addClass("active"),popupOpened=!0)}function videoPopup(o,e){var i;$("#"+o).length&&(popupOpenedPos=$(window).scrollTop(),$(".popups-overlay").addClass("active"),$("body").addClass("body--popup-opened"),scrollLock(scrollFixedEl),$(".popup").removeClass("active"),(i=$(".popup#"+o)).find(".popup-video").html('<iframe src="'+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),i.scrollTop(0).addClass("active"),popupOpened=!0)}function popupClose(){$(".popups-overlay").removeClass("active"),$(".popup").removeClass("active"),$("body").removeClass("body--popup-opened"),setTimeout(function(){scrollLock(scrollFixedEl,"unlock")},animDuration),device.ios()&&$(window).scrollTop(popupOpenedPos),$(".popup-video").html(""),$(".popup").find(".ui-form-field").removeClass("ui-form-field--error"),$(".popup").find(".ui-form-field").find("input, textarea").val("").trigger("change"),popupOpened=!1}function thx(o){$(".popup").removeClass("active"),popup(o=o||"thx"),$(".popup").find(".ui-form-field").removeClass("ui-form-field--error"),$(".popup").find(".ui-form-field").find("input, textarea").val("").trigger("change")}function changeFormTitle(o){formTitle=o}function formValidator(o){var e=$(o),t="ui-form-field--error",n="",a=!0;return e.find(".ui-form-field--required").length&&e.find(".ui-form-field--required").each(function(){var o=$(this),e=o.attr("data-field-type"),i=o.find("input").length?o.find("input").val():o.find("textarea").val();o.find(".form-errors__item--type").remove(),i?(o.removeClass(t),o.find(".ui-form-errors__item--required").hide(),"email"==e&&(n="Неверный формат e-mail",/^([a-z0-9_\.-])+@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/i.test(i)?(o.find(".ui-form-errors_item--type").remove(),o.removeClass(t)):(o.find(".ui-form-errors").append('<p class="ui-form-errors__item--type">'+n+"</p>"),o.addClass(t),a=!1)),"phone"==e&&(n="Неверный формат телефона",/[^0-9\+ ()\-]/.test(i)?($(this).find(".ui-form-errors").append('<p class="ui-form-errors__item--type">'+n+"</p>"),o.addClass(t),a=!1):(o.find(".ui-form-errors__item--type").remove(),o.removeClass(t)))):(o.addClass(t),o.find(".ui-form-errors__item--type").remove(),o.find(".ui-form-errors__item--required").show(),a=!1)}),a}