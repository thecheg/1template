"use strict";function scrollbarWidth(){var t=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');$("body").append(t);var e=$("div",t).innerWidth();t.css("overflow-y","scroll");var o=$("div",t).innerWidth();return $(t).remove(),e-o}function defineBarWidth(){parseInt($("body").width());var t=parseInt($("body").height());scrollBarWidth=t>winHeight?scrollbarWidth():0}function popup(t,e,o,i,a){popupedPos=$(window).scrollTop(),$(".popups-overlay").addClass("active"),$("body").addClass("body--fixed body--popup-opened"),$("body").css("padding-right",scrollBarWidth),$(".popup").removeClass("active");var r=$(".popup#"+t);if("request"==t){o?r.find(".popup-title__head").html(o):r.find(".popup-title__head").html("Оставить заявку"),i?r.find(".popup-title__subtitle").html(i):r.find(".popup-title__subtitle").html("Оставьте заявку, и&nbsp;наш специалист свяжется с&nbsp;вами в&nbsp;ближайшее время"),a?r.find(".btn").html(a):r.find(".btn--sendform").html("Оставить заявку"),e&&(formTitle=e)}r.scrollTop(0).addClass("active"),popuped=!0}function videoPopup(t,e){popupedPos=$(window).scrollTop(),$(".popups-overlay").addClass("active"),$("body").addClass("body--fixed body--popup-opened"),$("body").css("padding-right",scrollBarWidth),$(".popup").removeClass("active");var o=$(".popup--video#"+t);o.find(".popup-video").html('<iframe src="'+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),o.scrollTop(0).addClass("active"),popuped=!0}function popupClose(){$(".popups-overlay").removeClass("active"),$(".popup").removeClass("active"),$("body").removeClass("body--popup-opened"),setTimeout(function(){$("body").css("padding-right",""),$("body").removeClass("body--fixed")},animDuration),device.ios()&&$(window).scrollTop(popupedPos),$(".popup_video").html(""),$(".popup").find(".form-field").removeClass("form-field--error"),$(".popup").find(".form-field").find("input, textarea").val("").trigger("change"),popuped=!1}function thx(t){$(".popup").removeClass("active"),t||(t="thx"),popup(t),$("body").find(".form-field--error").removeClass("form-field--error"),$("body").find("textarea, input").val("").trigger("change")}function changeFormTitle(t){formTitle=t}function formValidator(t){var e=$(t),o=!0;if(e.find(".form-field--required").length&&e.find(".form-field--required").each(function(){var t,e="form-field--error",i=$(this).attr("data-field-type");if(t=$(this).find("input").length?$(this).find("input").val():$(this).find("textarea").val()){if($(this).removeClass(e),$(this).find(".form-errors__item--required").hide(),"email"==i){a="Неверный формат e-mail";/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(t)?($(this).find(".form-errors_item--type").remove(),$(this).removeClass(e)):($(this).find(".form-errors").append('<p class="form-errors__item--type">'+a+"</p>"),$(this).addClass(e),o=!1)}if("phone"==i){var a="Неверный формат номера телефона";/[^0-9\+ ()\-]/.test(t)?($(this).find(".form-errors").append('<p class="form-errors__item--type">'+a+"</p>"),$(this).addClass(e),o=!1):($(this).find(".form-errors__item--type").remove(),$(this).removeClass(e))}}else $(this).addClass(e),$(this).find(".form-errors__item--type").remove(),$(this).find(".form-errors__item--required").show(),o=!1}),1!=o)return!1}var winWidth,winHeight,scrollOffset=60,popuped=!1,scrollPos=0,animDuration=400,offsetElem=$("header"),popupedPos,formTitle="";$(document).ready(function(){function t(t){return $('[data-scroll-section="'+t+'"]').first().offset().top-scrollOffset}$("[data-scroll-section]");svg4everybody(),$(".preloader").fadeOut(animDuration,function(){$(this).remove()}),serviceName&&(serviceName+=" – "),winWidth=$(window).width(),winHeight=$(window).height(),scrollPos=$(window).scrollTop(),$("img[data-src]").each(function(){var t=$(this);t.attr("src",t.attr("data-src")),t.on("load",function(){t.removeAttr("data-src")})}),$(window).on("resize",function(){winWidth=$(window).width(),winHeight=$(window).height(),scrollPos=$(window).scrollTop(),scrollbarWidth(),defineBarWidth()}),$(window).on("scroll",function(){scrollPos=$(window).scrollTop()}),$(window).trigger("resize").trigger("scroll"),device.desktop(),$(".form--validate").each(function(){var t=$(this);t.find(".form-field").each(function(){$(this).append('<div class="form-errors" />')}),t.find(".form-field--required").find(".form-errors").append('<p class="form-errors__item form-errors__item--required">Обязательное поле</p>')}),$(".form--validate").find(".form-field--required").each(function(){$(this).find(".placeholder").append(" *")}),$(".label--input").each(function(){var t=$(this),e=$(this).find("input, textarea"),o=$(this).closest(".form-field");e.on("focus",function(){t.addClass("active focused")}).on("focusout blur change keyup input",function(){""==$(this).val()?e.is(":focus")||t.removeClass("active"):(t.addClass("active"),o.removeClass("form-field--error"))}).on("focusout",function(){t.removeClass("focused")})}),$(".form--enter").find("input").on("focus",function(){$(this).closest(".form--enter").addClass("focused")}).on("blur",function(){$(this).closest(".form--enter").removeClass("focused")}),$(".form--enter").find("input").on("focus",function(){var t=$(this).closest(".form--enter"),e=t.find(".btn--enter");$(document).keydown(function(o){t.hasClass("focused")&&13==o.which&&e.trigger("click")})}),$('input[type="number"]').on("input change paste keyup",function(){var t=parseInt($(this).attr("data-max")),e=$(this).val();e.length>t&&$(this).val(e.slice(0,t))}),$('input.input-phone_number, .form-validate .form-field[data-field-type="phone"] input').on("input change paste keyup",function(){$(this).val(this.value.replace(/[^0-9\+ ()\-]/,""))}),$(".scrollTo").on("click",function(t){t.preventDefault();var e=$(this).attr("data-scrollto");if(e){var o=$('[data-scrollto="'+e+'"]').not($(this)).offset().top-scrollOffset;$("html, body").animate({scrollTop:o},500)}}),$(".tab-content").hide(),$(".tabs").each(function(){($(this).find(".tab.active").length<1||$(this).find(".tab.active").length>1)&&($(this).find(".tab").removeClass("active"),$(this).find(".tab:first-child").addClass("active"));var t=$(this).find(".tab.active").find("a").attr("data-tab");$('.tab-content[data-tab="'+t+'"]').show()}),$(".tabs").find(".tab__link").on("click",function(){if(!$(this).closest(".tab").hasClass("active")){var t=$(this).attr("data-tab");$(this).closest(".tabs").find(".tab").removeClass("active"),$(this).closest(".tab").addClass("active"),$('.tab-content[data-tab="'+t+'"]').parent().find(".tab-content").hide(),$('.tab-content[data-tab="'+t+'"]').fadeIn(animDuration)}}),$(".accordion").each(function(){function t(t,i){var s=animDuration;if(r||(s=0),"open"==i){if(r){a.hide();var d=t.offset().top-scrollOffset-30;e.find(".accordion__item.active").find(".accordion__panel").show(),setTimeout(function(){$("html, body").animate({scrollTop:d},animDuration)},30)}if(setTimeout(function(){o.removeClass("active"),t.addClass("active"),a.slideUp(s),t.find(".accordion__panel").slideDown(s)},30),n){var l=e.attr("data-acc"),c=t.attr("data-acc-item"),p=$('[data-acc-con="'+l+'"]');p.find("[data-acc-con-item]").removeClass("active"),p.find('[data-acc-con-item="'+c+'"]').addClass("active")}}else t.removeClass("active"),a.slideUp(s);r||(r=!0)}var e=$(this),o=e.find(".accordion__item"),i=e.find(".accordion__trigger"),a=e.find(".accordion__panel"),r=!1,s=!0,n=!1;e.hasClass("not-collapsable")&&(s=!1),e.attr("data-acc")&&(n=!0),e.hasClass("collapsed")||t(!e.find(".accordion__item.active").length||e.find(".accordion__item.active").length>1?o.first():e.find(".accordion__item.active"),"open"),i.on("click",function(){var e=$(this).closest(".accordion__item");e.hasClass("active")?s&&t(e,"close"):t(e,"open")})}),$("iframe").each(function(){var t=$(this).attr("src"),e="wmode=transparent";if(-1!=t.indexOf("?")){var o=t.split("?"),i=o[1],a=o[0];$(this).attr("src",a+"?"+e+"&"+i)}else $(this).attr("src",t+"?"+e)}),$(".popup-content").each(function(){$(this).prepend('<div class="popup-close noselect" />')}),$(".popup-close").on("click",function(){popupClose()}),$(".popup").on("click",function(t){$(t.target).closest(".popup-content").length||(popupClose(),t.stopPropagation())}),$(document).on("keypress",function(t){(popuped=!0)&&27==t.which&&popupClose()}),$(".btn--sendform").on("click",function(t){t.preventDefault();var e=$(this),o=$(this).closest("form"),i=formValidator(o.get(0)),a=$(this).attr("data-form-type");if(0!=i){var r=new FormData(o.get(0)),s=e.attr("data-thxpopup")||"thx";formTitle||(formTitle="Заявка"),r.append("formTitle",formTitle),r.append("submit",a),$.ajax({type:"POST",url:rootPath+"php/send.php",dataType:"json",processData:!1,contentType:!1,data:r,success:function(){thx(s)},error:function(){console.log(data)}})}else o.find(".form-field-error").first().find("input, textarea").focus()});var e=!1;$(".nav-scroll[data-scroll-link]").on("click",function(o){var i=$(this).attr("data-scroll-link"),a=0;$('[data-scroll-section="'+i+'"]').length&&($(".nav-scroll[data-scroll-link]").closest("li").removeClass("active"),$('.nav-scroll[data-scroll-link="'+i+'"]').closest("li").addClass("active"),e=!0,a=t(i),$("html, body").animate({scrollTop:a},500,function(){e=!1}),$("body").removeClass("body--popuped body--menu-opened")),o.preventDefault()})}),$(window).on("load",function(){setTimeout(function(){$(".preloader").fadeOut(1e3,function(){$(this).remove()}),$("body").addClass("body--page-loaded"),pageLoaded=!0,$(window).trigger("scroll")},1e3)});var scrollBarWidth=0;