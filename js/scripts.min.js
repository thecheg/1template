"use strict";function scrollbarWidth(){var e=$('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');$("body").append(e);var t=$("div",e).innerWidth();e.css("overflow-y","scroll");var i=$("div",e).innerWidth();return $(e).remove(),t-i}function defineBarWidth(){parseInt($("body").width());var e=parseInt($("body").height());scrollBarWidth=e>winHeight?scrollbarWidth():0}function popup(e,t,i,o,s){popupedPos=$(window).scrollTop(),$(".popups-overlay").addClass("active"),$("body").addClass("body--fixed body--popup-opened"),$("body").css("padding-right",scrollBarWidth),$(".popup").removeClass("active");var a=$(".popup#"+e);if("request"==e){i?a.find(".popup-title__head").html(i):a.find(".popup-title__head").html("Оставить заявку"),o?a.find(".popup-title__subtitle").html(o):a.find(".popup-title__subtitle").html("Оставьте заявку, и&nbsp;наш специалист свяжется с&nbsp;вами в&nbsp;ближайшее время"),s?a.find(".btn").html(s):a.find(".btn--sendform").html("Оставить заявку"),t&&(formTitle=t)}a.scrollTop(0).addClass("active"),popuped=!0}function videoPopup(e,t){popupedPos=$(window).scrollTop(),$(".popups-overlay").addClass("active"),$("body").addClass("body--fixed body--popup-opened"),$("body").css("padding-right",scrollBarWidth),$(".popup").removeClass("active");var i=$(".popup--video#"+e);i.find(".popup-video").html('<iframe src="'+t+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),i.scrollTop(0).addClass("active"),popuped=!0}function popupClose(){$(".popups-overlay").removeClass("active"),$(".popup").removeClass("active"),$("body").removeClass("body--popup-opened"),setTimeout(function(){$("body").css("padding-right",""),$("body").removeClass("body--fixed")},animDuration),device.ios()&&$(window).scrollTop(popupedPos),$(".popup_video").html(""),$(".popup").find(".form-field").removeClass("form-field--error"),$(".popup").find(".form-field").find("input, textarea").val("").trigger("change"),popuped=!1}function thx(e){$(".popup").removeClass("active"),e||(e="thx"),popup(e),$("body").find(".form-field--error").removeClass("form-field--error"),$("body").find("textarea, input").val("").trigger("change")}function changeFormTitle(e){formTitle=e}function formValidator(e){var t=$(e),i=!0;if(t.find(".form-field--required").length&&t.find(".form-field--required").each(function(){var e,t="form-field--error",o=$(this).attr("data-field-type");if(e=$(this).find("input").length?$(this).find("input").val():$(this).find("textarea").val()){if($(this).removeClass(t),$(this).find(".form-errors__item--required").hide(),"email"==o){s="Неверный формат e-mail";/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(e)?($(this).find(".form-errors_item--type").remove(),$(this).removeClass(t)):($(this).find(".form-errors").append('<p class="form-errors__item--type">'+s+"</p>"),$(this).addClass(t),i=!1)}if("phone"==o){var s="Неверный формат номера телефона";/[^0-9\+ ()\-]/.test(e)?($(this).find(".form-errors").append('<p class="form-errors__item--type">'+s+"</p>"),$(this).addClass(t),i=!1):($(this).find(".form-errors__item--type").remove(),$(this).removeClass(t))}}else $(this).addClass(t),$(this).find(".form-errors__item--type").remove(),$(this).find(".form-errors__item--required").show(),i=!1}),1!=i)return!1}var winWidth,winHeight,scrollOffset=60,popuped=!1,scrollPos=0,animDuration=400,offsetElem=$("header"),popupedPos,formTitle="";$(document).ready(function(){function e(e){return $('[data-scroll-section="'+e+'"]').first().offset().top-scrollOffset}$("[data-scroll-section]");svg4everybody(),$(".preloader").fadeOut(animDuration,function(){$(this).remove()}),serviceName&&(serviceName+=" – "),winWidth=$(window).width(),winHeight=$(window).height(),scrollPos=$(window).scrollTop(),$("img[data-src]").each(function(){var e=$(this);e.attr("src",e.attr("data-src")),e.on("load",function(){e.removeAttr("data-src")})}),$(window).on("resize",function(){winWidth=$(window).width(),winHeight=$(window).height(),scrollPos=$(window).scrollTop(),scrollbarWidth(),defineBarWidth()}),$(window).on("scroll",function(){scrollPos=$(window).scrollTop()}),$(window).trigger("resize").trigger("scroll"),device.desktop(),$(".form--validate").each(function(){var e=$(this);e.find(".form-field").each(function(){$(this).append('<div class="form-errors" />')}),e.find(".form-field--required").find(".form-errors").append('<p class="form-errors__item form-errors__item-required">Обязательное поле</p>')}),$(".form--validate").find(".form-field--required").each(function(){$(this).find(".placeholder").append(" *")}),$(".label--input").each(function(){var e=$(this),t=$(this).find("input, textarea"),i=$(this).closest(".form-field");t.on("focus",function(){e.addClass("active focused")}).on("focusout blur change keyup input",function(){""==$(this).val()?t.is(":focus")||e.removeClass("active"):(e.addClass("active"),i.removeClass("form-field--error"))}).on("focusout",function(){e.removeClass("focused")})}),$(".form--enter").find("input").on("focus",function(){$(this).closest(".form--enter").addClass("focused")}).on("blur",function(){$(this).closest(".form--enter").removeClass("focused")}),$(".form--enter").find("input").on("focus",function(){var e=$(this).closest(".form--enter"),t=e.find(".btn--enter");$(document).keydown(function(i){e.hasClass("focused")&&13==i.which&&t.trigger("click")})}),$('input[type="number"]').on("input change paste keyup",function(){var e=parseInt($(this).attr("data-max")),t=$(this).val();t.length>e&&$(this).val(t.slice(0,e))}),$('input.input-phone_number, .form-validate .form-field[data-field-type="phone"] input').on("input change paste keyup",function(){$(this).val(this.value.replace(/[^0-9\+ ()\-]/,""))}),$(".scrollTo").on("click",function(e){e.preventDefault();var t=$(this).attr("data-scrollto");if(t){var i=$('[data-scrollto="'+t+'"]').not($(this)).offset().top-scrollOffset;$("html, body").animate({scrollTop:i},500)}}),$(".tab-content").hide(),$("ul.tabs").each(function(){($(this).find("li.active").length<1||$(this).find("li.active").length>1)&&($(this).find("li").removeClass("active"),$(this).find("li:first-child").addClass("active"));var e=$(this).find("li.active").find("a").attr("data-tab");$('.tab-content[data-tab="'+e+'"]').show()}),$("ul.tabs").find("a").on("click",function(){if(!$(this).closest("li").hasClass("active")){var e=$(this).attr("data-tab");$(this).closest("ul").find("li").removeClass("active"),$(this).closest("li").addClass("active"),$('.tab-content[data-tab="'+e+'"]').parent().find(".tab-content").hide(),$('.tab-content[data-tab="'+e+'"]').fadeIn(animDuration)}}),$("ul.accordion").not(".collapsed").each(function(){($(this).find("li.active").length<1||$(this).find("li.active").length>1)&&($(this).find("li").removeClass("active"),$(this).find("li").first().addClass("active"))}),$("ul.accordion").find("li").not(".active").each(function(){$(this).find(".panel").hide()}),$("ul.accordion").find("li").find("h6").on("click",function(){var e=$(this).closest("li"),t=$(this).closest("ul").find("li");if(e.hasClass("active"))e.removeClass("active"),t.find(".panel").slideUp(animDuration);else{$(this).closest("ul.accordion").find(".panel").hide();var i=e.offset().top-scrollOffset;$(this).closest("ul.accordion").find("li.active").find(".panel").show(),setTimeout(function(){$("html, body").animate({scrollTop:i},animDuration),t.removeClass("active"),e.addClass("active"),t.find(".panel").slideUp(animDuration),e.find(".panel").slideDown(animDuration)},1)}}),$("iframe").each(function(){var e=$(this).attr("src"),t="wmode=transparent";if(-1!=e.indexOf("?")){var i=e.split("?"),o=i[1],s=i[0];$(this).attr("src",s+"?"+t+"&"+o)}else $(this).attr("src",e+"?"+t)}),$(".popup-content").each(function(){$(this).prepend('<div class="popup-close noselect" />')}),$(".popup-close").on("click",function(){popupClose()}),$(".popup").on("click",function(e){$(e.target).closest(".popup-content").length||(popupClose(),e.stopPropagation())}),$(document).keydown(function(e){(popuped=!0)&&27==e.which&&popupClose()}),$(".btn--sendform").on("click",function(){var e=$(this),t=$(this).closest("form"),i=formValidator(t.get(0)),o=$(this).attr("data-form-type");if(0!=i){var s=new FormData(t.get(0)),a=e.attr("data-thxpopup")||"thx";formTitle||(formTitle="Заявка"),s.append("formTitle",formTitle),s.append("submit",o),$.ajax({type:"POST",url:rootPath+"php/send.php",dataType:"json",processData:!1,contentType:!1,data:s,success:function(){thx(a)},error:function(){console.log(data)}})}else t.find(".form-field-error").first().find("input, textarea").focus()});var t=!1;$(".nav-scroll[data-scroll-link]").on("click",function(i){var o=$(this).attr("data-scroll-link"),s=0;$('[data-scroll-section="'+o+'"]').length&&($(".nav-scroll[data-scroll-link]").closest("li").removeClass("active"),$('.nav-scroll[data-scroll-link="'+o+'"]').closest("li").addClass("active"),t=!0,s=e(o),$("html, body").animate({scrollTop:s},500,function(){t=!1}),$("body").removeClass("body--popuped body--menu-opened")),i.preventDefault()})});var scrollBarWidth=0;