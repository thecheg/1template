"use strict";function popup(t,e,i,o,a){popupedPos=$(window).scrollTop(),$("body").addClass("body--popuped"),$(".popups-overlay").fadeIn(animDuration),$(".popup").removeClass("active").fadeOut(animDuration);var n=$(".popup#"+t);if("request"==t){i?n.find(".popup-title__head").html(i):n.find(".popup-title__head").html("Оставить заявку"),o?n.find(".popup-title__subtitle").html(o):n.find(".popup-title__subtitle").html("Оставьте заявку, и&nbsp;наш специалист свяжется с&nbsp;вами в&nbsp;ближайшее время"),a?n.find(".btn").html(a):n.find(".btn--sendform").html("Оставить заявку"),e&&(formTitle=e)}n.addClass("active").fadeIn(animDuration).scrollTop(0),popuped=!0}function videoPopup(t,e){popupedPos=$(window).scrollTop(),$("body").addClass("body--popuped"),$(".popups-overlay").fadeIn(animDuration),$(".popup").removeClass("active").fadeOut(animDuration);var i=$(".popup--video#"+t);i.find(".popup__video").html('<iframe src="'+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),i.addClass("active").fadeIn(animDuration).scrollTop(0),popuped=!0}function popupClose(){$(".popups-overlay").fadeOut(animDuration),$(".popup").removeClass("active").fadeOut(animDuration,function(){$("body").removeClass("body--popuped")}),device.ios()&&$(window).scrollTop(popupedPos),$(".popup_video").html(""),$(".popup").find(".form-field").removeClass("form-field--error"),$(".popup").find(".form-field").find("input, textarea").val("").trigger("change"),popuped=!1}function thx(t){$(".popup").removeClass("active").fadeOut(animDuration),t||(t="thx"),popup(t),$("body").find(".form-field--error").removeClass("form-field--error"),$("body").find("textarea, input").val("").trigger("change")}function changeFormTitle(t){formTitle=t}function formValidator(t){var e=$(t),i=!0;if(e.find(".form-field--required").length&&e.find(".form-field--required").each(function(){var t,e="form-field--error",o=$(this).attr("data-field-type");if(t=$(this).find("input").length?$(this).find("input").val():$(this).find("textarea").val()){if($(this).removeClass(e),$(this).find(".form-errors__item--required").hide(),"email"==o){a="Неверный формат e-mail";/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/.test(t)?($(this).find(".form-errors_item--type").remove(),$(this).removeClass(e)):($(this).find(".form-errors").append('<p class="form-errors__item--type">'+a+"</p>"),$(this).addClass(e),i=!1)}if("phone"==o){var a="Неверный формат номера телефона";/[^0-9\+ ()\-]/.test(t)?($(this).find(".form-errors").append('<p class="form-errors__item--type">'+a+"</p>"),$(this).addClass(e),i=!1):($(this).find(".form-errors__item--type").remove(),$(this).removeClass(e))}}else $(this).addClass(e),$(this).find(".form-errors__item--type").remove(),$(this).find(".form-errors__item--required").show(),i=!1}),1!=i)return!1}var winWidth,winHeight,scrollOffset=60,popuped=!1,scrollPos=0,animDuration=400,offsetElem=$("header"),popupedPos,formTitle="";$(document).ready(function(){function t(t){return $('[data-scroll-section="'+t+'"]').first().offset().top-scrollOffset}$("[data-scroll-section]");svg4everybody(),$(".preloader").fadeOut(animDuration,function(){$(this).remove()}),$("a.fancybox").fancybox(),serviceName&&(serviceName+=" – "),winWidth=$(window).width(),winHeight=$(window).height(),scrollPos=$(window).scrollTop(),$("img[data-src]").each(function(){var t=$(this);t.attr("src",t.attr("data-src")),t.on("load",function(){t.removeAttr("data-src")})}),$(window).on("resize",function(){winWidth=$(window).width(),winHeight=$(window).height(),scrollPos=$(window).scrollTop()}),$(window).on("scroll",function(){scrollPos=$(window).scrollTop()}),$(window).trigger("resize").trigger("scroll"),device.desktop(),$(".form--validate").each(function(){var t=$(this);t.find(".form-field").each(function(){$(this).append('<div class="form-errors" />')}),t.find(".form-field--required").find(".form-errors").append('<p class="form-errors__item form-errors__item-required">Обязательное поле</p>')}),$(".form--validate").find(".form-field--required").each(function(){$(this).find(".placeholder").append(" *")}),$(".label--input").each(function(){var t=$(this),e=$(this).find("input, textarea"),i=$(this).closest(".form-field");e.on("focus",function(){t.addClass("active focused")}).on("focusout blur change keyup input",function(){""==$(this).val()?e.is(":focus")||t.removeClass("active"):(t.addClass("active"),i.removeClass("form-field--error"))}).on("focusout",function(){t.removeClass("focused")})}),$(".form--enter").find("input").on("focus",function(){$(this).closest(".form--enter").addClass("focused")}).on("blur",function(){$(this).closest(".form--enter").removeClass("focused")}),$(".form--enter").find("input").on("focus",function(){var t=$(this).closest(".form--enter"),e=t.find(".btn--enter");$(document).keydown(function(i){t.hasClass("focused")&&13==i.which&&e.trigger("click")})}),$('input[type="number"]').on("input change paste keyup",function(){var t=parseInt($(this).attr("data-max")),e=$(this).val();e.length>t&&$(this).val(e.slice(0,t))}),$('input.input-phone_number, .form-validate .form-field[data-field-type="phone"] input').on("input change paste keyup",function(){$(this).val(this.value.replace(/[^0-9\+ ()\-]/,""))}),$(".scrollTo").on("click",function(t){t.preventDefault();var e=$(this).attr("data-scrollto");if(e){var i=$('[data-scrollto="'+e+'"]').not($(this)).offset().top-scrollOffset;$("html, body").animate({scrollTop:i},500)}}),$(".tab-content").hide(),$("ul.tabs").each(function(){($(this).find("li.active").length<1||$(this).find("li.active").length>1)&&($(this).find("li").removeClass("active"),$(this).find("li:first-child").addClass("active"));var t=$(this).find("li.active").find("a").attr("data-tab");$('.tab-content[data-tab="'+t+'"]').show()}),$("ul.tabs").find("a").on("click",function(){if(!$(this).closest("li").hasClass("active")){var t=$(this).attr("data-tab");$(this).closest("ul").find("li").removeClass("active"),$(this).closest("li").addClass("active"),$('.tab-content[data-tab="'+t+'"]').parent().find(".tab-content").hide(),$('.tab-content[data-tab="'+t+'"]').fadeIn(animDuration)}}),$("ul.accordion").not(".collapsed").each(function(){($(this).find("li.active").length<1||$(this).find("li.active").length>1)&&($(this).find("li").removeClass("active"),$(this).find("li").first().addClass("active"))}),$("ul.accordion").find("li").not(".active").each(function(){$(this).find(".panel").hide()}),$("ul.accordion").find("li").find("h6").on("click",function(){var t=$(this).closest("li"),e=$(this).closest("ul").find("li");if(t.hasClass("active"))t.removeClass("active"),e.find(".panel").slideUp(animDuration);else{$(this).closest("ul.accordion").find(".panel").hide();var i=t.offset().top-scrollOffset;$(this).closest("ul.accordion").find("li.active").find(".panel").show(),setTimeout(function(){$("html, body").animate({scrollTop:i},animDuration),e.removeClass("active"),t.addClass("active"),e.find(".panel").slideUp(animDuration),t.find(".panel").slideDown(animDuration)},1)}}),$("iframe").each(function(){var t=$(this).attr("src"),e="wmode=transparent";if(-1!=t.indexOf("?")){var i=t.split("?"),o=i[1],a=i[0];$(this).attr("src",a+"?"+e+"&"+o)}else $(this).attr("src",t+"?"+e)}),$(".popup__content").each(function(){$(this).prepend('<div class="popup__close noselect" />')}),$(".popup__close").on("click",function(){popupClose()}),$(".popup").on("click",function(t){$(t.target).closest(".popup__content").length||(popupClose(),t.stopPropagation())}),$(document).keydown(function(t){(popuped=!0)&&27==t.which&&popupClose()}),$(".btn--sendform").on("click",function(){var t=$(this),e=$(this).closest("form"),i=formValidator(e.get(0)),o=$(this).attr("data-form-type");if(0!=i){var a=new FormData(e.get(0)),n=t.attr("data-thxpopup")||"thx";formTitle||(formTitle="Заявка"),a.append("formTitle",formTitle),a.append("submit",o),$.ajax({type:"POST",url:rootPath+"php/send.php",dataType:"json",processData:!1,contentType:!1,data:a,success:function(){thx(n)},error:function(){console.log(data)}})}else e.find(".form-field-error").first().find("input, textarea").focus()});var e=!1;$(".nav-scroll[data-scroll-link]").on("click",function(i){var o=$(this).attr("data-scroll-link"),a=0;$('[data-scroll-section="'+o+'"]').length&&($(".nav-scroll[data-scroll-link]").closest("li").removeClass("active"),$('.nav-scroll[data-scroll-link="'+o+'"]').closest("li").addClass("active"),e=!0,a=t(o),$("html, body").animate({scrollTop:a},500,function(){e=!1}),$("body").removeClass("body--popuped body--menu-opened")),i.preventDefault()})});